(this.webpackJsonppart1_step1=this.webpackJsonppart1_step1||[]).push([[0],{44:function(e,n,t){"use strict";t.r(n);var o=t(2),c=t.n(o),a=t(18),r=t.n(a),u=(t(9),t(3)),i=t(19),l=t(5),s=t.n(l),d="/api/persons",b={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},removePerson:function(e){var n=d+"/"+e;return s.a.delete(n).then((function(e){return e.data}))},updateNumber:function(e){var n=Object(u.a)(e,2),t=n[0],o=n[1],c=d+"/"+t;return s.a.put(c,o).then((function(e){return e.data}))}},j=t(0),h=function(e){var n=[];return""===(n=e.currentlyInPhonebook.filter((function(n){return n.name.toLowerCase().includes(e.filteredOutPeople.toLowerCase())})))&&(n=Object(i.a)(e.currentlyInPhonebook)),Object(j.jsx)("div",{children:n.map((function(n){return Object(j.jsxs)("div",{children:[" ",n.name," ",n.phone," ",Object(j.jsx)("button",{onClick:function(){return e.personToRemove([n.id,n.name])},children:"delete"})]},n.name)}))})},f=function(e){return Object(j.jsxs)("form",{onSubmit:e.addPerson,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.valuePerson,onChange:e.onNameChange})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.valuePhone,onChange:e.onNumberChange})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){return Object(j.jsxs)("div",{children:["Filter shown with: ",Object(j.jsx)("input",{value:e.filterPeopleByName,onChange:e.onNameFilter})]})},O=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"userAdded",children:n})},v=function(e){var n=e.message;return null===n?null:Object(j.jsx)("div",{className:"userNotFound",children:n})},p=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),r=Object(u.a)(a,2),i=r[0],l=r[1],s=Object(o.useState)(""),d=Object(u.a)(s,2),p=d[0],g=d[1],x=Object(o.useState)(""),P=Object(u.a)(x,2),w=P[0],N=P[1],y=Object(o.useState)(null),C=Object(u.a)(y,2),k=C[0],F=C[1],S=Object(o.useState)(null),T=Object(u.a)(S,2),I=T[0],A=T[1];Object(o.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]);return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(O,{message:k}),Object(j.jsx)(v,{message:I}),Object(j.jsx)(m,{filterOutNames:w,currentlyInPhonebook:t,onNameFilter:function(e){console.log(e.target.value),N(e.target.value)}}),Object(j.jsx)("h2",{children:"Add a new"}),Object(j.jsx)(f,{valuePerson:i,valuePhone:p,onNameChange:function(e){console.log(e.target.value),l(e.target.value)},onNumberChange:function(e){console.log(e.target.value),g(e.target.value)},addPerson:function(e){if(e.preventDefault(),""===i||""===p)return window.alert("Fields cannot be empty");var n;(t.find((function(e){return n=e.name===i?e.id:null})),null!==n)?window.confirm("".concat(i," is already added to phonebook. Would you like to replace the old number with a new one?"))&&(b.updateNumber([n,{name:i,phone:p}]).then((function(e){c(t.map((function(n){return n.name!==i?n:e}))),l(""),g(""),console.log("testing"),F("".concat(i,"'s number has been updated"))})).catch((function(e){A("".concat(i," has already been removed from database")),setTimeout((function(){A(null)}),2e3)})),setTimeout((function(){F(null)}),2e3)):(b.create({name:i,phone:p}).then((function(e){c(t.concat(e)),l(""),g("")})),F("Added ".concat(i)),setTimeout((function(){F(null)}),2e3))}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(h,{currentlyInPhonebook:t,filteredOutPeople:w,personToRemove:function(e){var n=Object(u.a)(e,2),o=n[0],a=n[1];window.confirm("Do you want to delete ".concat(a,"?"))&&b.removePerson(o).then((function(){c(t.filter((function(e){return e.id!==o})))})).catch((function(e){A("".concat(i," has already been removed from database")),setTimeout((function(){A(null)}),2e3)}))}})]})},g=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,45)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,a=n.getLCP,r=n.getTTFB;t(e),o(e),c(e),a(e),r(e)}))};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root")),g()},9:function(e,n,t){}},[[44,1,2]]]);
//# sourceMappingURL=main.0609c400.chunk.js.map